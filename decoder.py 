import requests
import re

def fetch_and_print_grid(doc_url: str):
    """
    Given the URL of a published Google Doc containing Unicode characters
    and their (x, y) positions, retrieve the data and print the grid.
    """
    # Fetch raw text from the published doc
    response = requests.get(doc_url)
    response.raise_for_status()
    text = response.text

    # Each line looks like: "U+2588 (x=0, y=0)" or similar
    # Extract Unicode char and coordinates
    pattern = re.compile(r"(.)\s*\(x=(\d+),\s*y=(\d+)\)")
    coords = []
    for match in pattern.finditer(text):
        char = match.group(1)
        x = int(match.group(2))
        y = int(match.group(3))
        coords.append((char, x, y))

    if not coords:
        print("No characters found in document.")
        return

    # Determine grid bounds
    max_x = max(x for _, x, _ in coords)
    max_y = max(y for _, _, y in coords)

    # Fill with spaces
    grid = [[" " for _ in range(max_x + 1)] for _ in range(max_y + 1)]

    # Place characters
    for char, x, y in coords:
        grid[y][x] = char

    # Print grid row by row
    for row in grid:
        print("".join(row))
